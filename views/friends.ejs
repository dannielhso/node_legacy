<%-include('layouts/header.ejs')%>

    <h2>친구 목록 입니다.</h2>

    <table border=1>
        <tr>
            <th>id</th>
            <th>name</th>
            <th>phone</th>
            <th>email</th>
            <th>DELETE</th>
        </tr>
        <% lists.forEach(function(item) { %>
        <tr>
            <td><%=item.id%></td>
            <td><%=item.name%></td>
            <td><%=item.phone%></td>
            <td><%=item.email%></td>
            <td>
                <button type="button" onclick="deleteFriends('<%=item.id%>')"> DELETE </button>
            </td>
        </tr>
        <% }) %>
    </table>

    <script>
        async function deleteFriends(friendsId) {
            try {
                const response = await fetch(`/api/friendsDelete/${friendsId}`, {
                    method: 'PUT',
                    headers: {
                        'Content-Type': 'application/json'
                    }
                });
                if (!response.ok) {
                    throw new Error('삭제 오류');
                }
                alert('친구가 삭제되었습니다.');
                location.reload();
            } catch (error) {
                console.error('삭제 오류 : ', error);
            }
        }
    </script>

<%-include('layouts/footer.ejs')%>